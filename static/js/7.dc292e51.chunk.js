(this["webpackJsonpkuchnia-na-obcasach"]=this["webpackJsonpkuchnia-na-obcasach"]||[]).push([[7],{123:function(e,t,a){"use strict";a.r(t);var n=a(9),s=a.n(n),c=a(176),r=a(12),o=a(7),i=a(0),u=a.n(i),l=a(11),m=a(18),p=a(77),d=a(78);t.default=function(e){var t=e.className,a=e.type,n=void 0===a?"home":a,f=e.categoryId,g=void 0===f?0:f,b=Object(i.useRef)(),h=Object(i.useState)({posts:[],isLoading:!0,countPosts:0}),v=Object(o.a)(h,2),j=v[0],_=v[1],O=Object(i.useState)(0),E=Object(o.a)(O,2),N=E[0],w=E[1],S=Object(i.useState)(g),k=Object(o.a)(S,2),P=k[0],y=k[1],z=Object(i.useState)(!0),x=Object(o.a)(z,2),I=x[0],L=x[1],C=Object(i.useState)(0),J=Object(o.a)(C,2),T=J[0],B=J[1],R=Object(i.useState)(!1),A=Object(o.a)(R,2),M=A[0],U=A[1];Object(i.useEffect)((function(){var e=new AbortController,t=e.signal;sessionStorage.getItem("countPosts")||0===j.countPosts||sessionStorage.setItem("countPosts",JSON.stringify(j.countPosts));var a=function(){var e=Object(r.a)(s.a.mark((function e(){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(l.a,"posts?per_page=").concat(l.b,"&offset=").concat(N),"category"===n?a+="&categories=".concat(P):"tag"===n&&(a+="&tags=".concat(P)),e.prev=2,e.next=5,fetch(a,{signal:t});case 5:if((r=e.sent).ok){e.next=8;break}return e.abrupt("return");case 8:return M&&U(!1),e.t0=_,e.t1=[],e.t2=Object(c.a)(j.posts),e.t3=c.a,e.next=15,r.json();case 15:e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.t6=e.t1.concat.call(e.t1,e.t2,e.t5),e.t7=parseInt(r.headers.get("X-WP-Total"),10),e.t8={posts:e.t6,isLoading:!1,countPosts:e.t7},(0,e.t0)(e.t8),e.next=26;break;case 23:e.prev=23,e.t9=e.catch(2),U(!0);case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(){return e.apply(this,arguments)}}(),o=function(){return w(N+l.b)},i=new IntersectionObserver((function(e){if(e[0].intersectionRatio>0){var t=setTimeout(o,1e3);B(t)}}));if(sessionStorage.getItem("".concat(n))&&I){var u=JSON.parse(sessionStorage.getItem("".concat(n)));_({posts:Object(c.a)(u.posts),isLoading:!1,countPosts:parseInt(u.countPosts,10)}),w(u.posts.length)}if(!M){if(!j.isLoading&&j.countPosts===j.posts.length&&g===P)return;(j.posts.length<=j.countPosts||g!==P)&&(g!==P&&(window.location.reload(),y(g)),i.observe(b.current),sessionStorage.getItem("".concat(n))&&I||a()),sessionStorage.getItem("".concat(n))&&I&&L(!1)}return function(){e.abort(),i.disconnect(),clearTimeout(T)}}),[N,g,n]);var W=function(){"home"===n&&sessionStorage.setItem("".concat(n),JSON.stringify(j)),clearTimeout(T)};return u.a.createElement("div",{className:t,ref:b},j.isLoading?u.a.createElement(m.a,null):0===j.posts.length?u.a.createElement("p",null,"Brak post\xf3w"):j.posts.map((function(e,t){return u.a.createElement(d.LazyLoadComponent,{key:t},u.a.createElement(p.a,{post:e,handleCache:W}))})))}},274:function(e,t,a){e.exports=a.p+"static/media/slider-1.005deb6f.jpg"},275:function(e,t,a){e.exports=a.p+"static/media/slider-2.732cc673.jpg"},276:function(e,t,a){e.exports=a.p+"static/media/slider-3.f59a09a8.jpg"},596:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(270),r=a.n(c),o=a(271),i=a.n(o),u=a(272),l=a(274),m=a.n(l),p=a(275),d=a.n(p),f=a(276),g=a.n(f),b=i()(r.a),h=function(){return s.a.createElement(b,{play:!0,cancelOnInteraction:!1,interval:5e3,cssModule:u.a,className:"slider"},s.a.createElement("div",{"data-src":m.a,className:"slider__item",alt:"Ciasto z porzeczkami"},"Smacznie"),s.a.createElement("div",{"data-src":g.a,className:"slider__item",alt:"deser malinowy"},"Zdrowo"),s.a.createElement("div",{"data-src":d.a,className:"slider__item",alt:"Babka z porzeczkami"},"Sezonowo"))},v=a(123);t.default=function(){return s.a.createElement("div",{className:"home"},s.a.createElement("header",{className:"home__header"},s.a.createElement(h,null)),s.a.createElement("main",{className:"home__posts"},s.a.createElement("div",{className:"home__posts__title"},s.a.createElement("h2",null,"Najnowsze posty")),s.a.createElement(v.default,{className:"home__posts__container"})))}},64:function(e,t,a){"use strict";t.a=function(e){return e=e.toLowerCase(),"".concat(e[0].toUpperCase()).concat(e.slice(1))}},70:function(e,t,a){"use strict";t.a=function(e){var t=e.split("T");return"".concat(t[0].split("-")[2],"-").concat(t[0].split("-")[1],"-").concat(t[0].split("-")[0])}},77:function(e,t,a){"use strict";var n=a(9),s=a.n(n),c=a(12),r=a(7),o=a(0),i=a.n(o),u=a(64),l=a(70),m=a(6),p=a(11),d=a(18),f=a(78);a(124);t.a=function(e){var t=e.post,a=e.handleCache,n=Object(o.useState)({images:[],isLoading:!0}),g=Object(r.a)(n,2),b=g[0],h=g[1];return Object(o.useEffect)((function(){(function(){var e=Object(c.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(p.a,"media?parent=").concat(t.id));case 3:if((a=e.sent).ok){e.next=6;break}return e.abrupt("return");case 6:return e.t0=h,e.next=9,a.json();case 9:e.t1=e.sent,e.t2={images:e.t1,isLoading:!1},(0,e.t0)(e.t2),e.next=17;break;case 14:return e.prev=14,e.t3=e.catch(0),e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),i.a.createElement(m.b,{to:"/wpisy/".concat(t.slug),className:"postPrev",onClick:a},i.a.createElement("div",{className:"postPrev__content"},b.isLoading?i.a.createElement(d.a,null):void 0!==b.images[0]&&i.a.createElement(f.LazyLoadImage,{alt:b.images[0].slug,height:b.images[0].media_details.sizes.medium.height,src:b.images[0].media_details.sizes.medium.source_url,width:b.images[0].media_details.sizes.medium.width,effect:"blur"})),i.a.createElement("h3",{className:"postPrev__title"},Object(u.a)(t.title.rendered)),i.a.createElement("p",{className:"postPrev__date"},Object(l.a)(t.date),"\xa0",i.a.createElement("i",{className:"icon-calendar"})))}}}]);
//# sourceMappingURL=7.dc292e51.chunk.js.map