{"version":3,"sources":["components/Post/InfinitePosts.js","assets/slider/slider-1.jpg","assets/slider/slider-2.jpg","assets/slider/slider-3.jpg","components/Slider.js","components/HomeAbout.js","components/Home.js","functions/prettierTitle.js","functions/changeDateType.js","components/Post/PostPrev.js"],"names":["InfinitePosts","className","type","categoryId","postsContainer","useRef","useState","posts","isLoading","countPosts","data","setData","offset","setOffset","newVisit","setNewVisit","timeoutId","setTimeoutId","isError","setIsError","addOffset","POSTS_PER_PAGE","intersectionObserver","IntersectionObserver","entries","intersectionRatio","currentTimeoutId","setTimeout","useEffect","sessionStorage","getItem","cachedData","JSON","parse","length","abortController","AbortController","signal","loadPosts","a","ENDPOINT","API","fetch","response","ok","json","parseInt","headers","get","observe","current","abort","disconnect","clearTimeout","handleCache","setItem","stringify","map","post","index","key","ref","module","exports","AutoplaySlider","withAutoplay","AwesomeSlider","Slider","play","cancelOnInteraction","interval","cssModule","AwesomeSliderStyles","data-src","img1","alt","img3","img2","smoothscroll","polyfill","HomeAbout","onClick","window","scroll","top","scrollY","left","behavior","Home","document","title","prettierTitle","toLowerCase","indexOf","replace","toUpperCase","slice","changeDateType","date","dateArr","split","PostPrev","images","image","setImage","id","loadImage","to","slug","undefined","media_details","sizes","large","height","full","src","source_url","width","effect","rendered"],"mappings":"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","file":"static/js/7.fa33c300.chunk.js","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { API, POSTS_PER_PAGE } from \"../../data\";\r\nimport Preloader from \"../Preloader\";\r\nimport PostPrev from \"./PostPrev\";\r\nimport { LazyLoadComponent } from \"react-lazy-load-image-component\";\r\n\r\nconst InfinitePosts = ({ className, type = \"home\", categoryId = 0 }) => {\r\n  const TIMEOUT = 1000;\r\n  const postsContainer = useRef();\r\n\r\n  const [data, setData] = useState({\r\n    posts: [],\r\n    isLoading: true,\r\n    countPosts: 0,\r\n  });\r\n  const [offset, setOffset] = useState(0);\r\n  const [newVisit, setNewVisit] = useState(true);\r\n  const [timeoutId, setTimeoutId] = useState(0);\r\n  const [isError, setIsError] = useState(false);\r\n\r\n  const addOffset = () => setOffset(offset + POSTS_PER_PAGE);\r\n\r\n  const intersectionObserver = new IntersectionObserver((entries) => {\r\n    if (entries[0].intersectionRatio > 0) {\r\n      const currentTimeoutId = setTimeout(addOffset, TIMEOUT);\r\n      setTimeoutId(currentTimeoutId);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (type !== \"home\") {\r\n      setData({ posts: [], isLoading: true, countPosts: 0 });\r\n      setOffset(0);\r\n    }\r\n  }, [categoryId, type]);\r\n\r\n  useEffect(() => {\r\n    if (type === \"home\") {\r\n      if (sessionStorage.getItem(`${type}`) && newVisit) {\r\n        const cachedData = JSON.parse(sessionStorage.getItem(`${type}`));\r\n        setData({\r\n          posts: [...cachedData.posts],\r\n          isLoading: false,\r\n          countPosts: JSON.parse(sessionStorage.getItem(\"countPosts\")),\r\n        });\r\n        setOffset(cachedData.posts.length);\r\n      }\r\n    }\r\n  }, [newVisit, type]);\r\n\r\n  useEffect(() => {\r\n    const abortController = new AbortController();\r\n    const signal = abortController.signal;\r\n\r\n    const loadPosts = async () => {\r\n      let ENDPOINT = `${API}posts?per_page=${POSTS_PER_PAGE}&offset=${offset}`;\r\n\r\n      if (type === \"category\") ENDPOINT += `&categories=${categoryId}`;\r\n      else if (type === \"tag\") ENDPOINT += `&tags=${categoryId}`;\r\n\r\n      try {\r\n        const response = await fetch(ENDPOINT, {\r\n          signal: signal,\r\n        });\r\n\r\n        if (!response.ok) return;\r\n\r\n        if (isError) setIsError(false);\r\n\r\n        setData({\r\n          posts: [...data.posts, ...(await response.json())],\r\n          isLoading: false,\r\n          countPosts: parseInt(response.headers.get(\"X-WP-Total\"), 10),\r\n        });\r\n      } catch {\r\n        setIsError(true);\r\n      }\r\n    };\r\n\r\n    if (!isError) {\r\n      if (!data.isLoading && data.countPosts === data.posts.length) return;\r\n\r\n      if (data.posts.length <= data.countPosts) {\r\n        intersectionObserver.observe(postsContainer.current);\r\n\r\n        if (type === \"home\") {\r\n          if (!sessionStorage.getItem(`${type}`)) loadPosts();\r\n          else if (!newVisit) loadPosts();\r\n        } else {\r\n          loadPosts();\r\n          setNewVisit(false);\r\n        }\r\n      }\r\n\r\n      if (sessionStorage.getItem(`${type}`) && newVisit) setNewVisit(false);\r\n    }\r\n\r\n    return () => {\r\n      abortController.abort();\r\n      intersectionObserver.disconnect();\r\n      clearTimeout(timeoutId);\r\n    };\r\n  }, [offset]);\r\n\r\n  const handleCache = () => {\r\n    type === \"home\" && sessionStorage.setItem(`${type}`, JSON.stringify(data));\r\n    clearTimeout(timeoutId);\r\n  };\r\n\r\n  return (\r\n    <div className={className}>\r\n      {data.isLoading ? (\r\n        <Preloader />\r\n      ) : data.posts.length === 0 ? (\r\n        <p>Brak postów</p>\r\n      ) : (\r\n        data.posts.map((post, index) => {\r\n          return (\r\n            <LazyLoadComponent key={index}>\r\n              <PostPrev post={post} handleCache={handleCache} />\r\n            </LazyLoadComponent>\r\n          );\r\n        })\r\n      )}\r\n      <div ref={postsContainer}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InfinitePosts;\r\n","module.exports = __webpack_public_path__ + \"static/media/slider-1.005deb6f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/slider-2.732cc673.jpg\";","module.exports = __webpack_public_path__ + \"static/media/slider-3.f59a09a8.jpg\";","import React from \"react\";\r\nimport AwesomeSlider from \"react-awesome-slider\";\r\nimport withAutoplay from \"../../node_modules/react-awesome-slider/dist/autoplay\";\r\nimport AwesomeSliderStyles from \"../../node_modules/react-awesome-slider/src/styles\";\r\nimport img1 from \"../assets/slider/slider-1.jpg\";\r\nimport img2 from \"../assets/slider/slider-2.jpg\";\r\nimport img3 from \"../assets/slider/slider-3.jpg\";\r\n\r\nconst AutoplaySlider = withAutoplay(AwesomeSlider);\r\n\r\nconst Slider = () => {\r\n  return (\r\n    <AutoplaySlider\r\n      play={true}\r\n      cancelOnInteraction={false}\r\n      interval={5000}\r\n      cssModule={AwesomeSliderStyles}\r\n      className=\"slider\"\r\n    >\r\n      <div data-src={img1} className=\"slider__item\" alt=\"Ciasto z porzeczkami\">Smacznie</div>\r\n      <div data-src={img3} className=\"slider__item\" alt=\"deser malinowy\">Zdrowo</div>\r\n      <div data-src={img2} className=\"slider__item\" alt=\"Babka z porzeczkami\">Sezonowo</div>\r\n    </AutoplaySlider>\r\n  );\r\n};\r\n\r\nexport default Slider;\r\n","import React from \"react\";\r\nimport smoothscroll from \"smoothscroll-polyfill\";\r\n\r\nsmoothscroll.polyfill();\r\n\r\nconst HomeAbout = () => {\r\n  const handleScroll = () =>\r\n    window.scroll({\r\n      top: window.scrollY + 600,\r\n      left: 0,\r\n      behavior: \"smooth\",\r\n    });\r\n  return (\r\n    <>\r\n      <div className=\"home__about__title\">\r\n        <h1>Kuchnia na obcasach</h1>\r\n      </div>\r\n      <p className=\"home__about__text\">\r\n        Kuchnia na Obcasach to blog kulinarny z przepisami na smaczne, zdrowe i\r\n        sezonowe potrawy. Znajdziecie tu przepisy na dania klasyczne, z nutką\r\n        nowoczesności, a także potrawy dietetyczne dla osób zdrowo odżywiających\r\n        się i będących fit wraz z podaną kalorycznością i rozkładem\r\n        makroskładników. Znajdziecie tu także sporą dawkę inspiracji na słodkie\r\n        wypieki, desery i fit słodkości. Osoby, które dopiero zaczynają swoją\r\n        przygodę z gotowaniem na pewno znajdą tutaj wiele cennych wskazówek i\r\n        porad kulinarnych. Serdecznie zapraszam do korzystania i próbowania\r\n        przepisów.\r\n      </p>\r\n      <button className=\"home__about__button\" onClick={handleScroll}>\r\n        Znajdź coś dla siebie!\r\n      </button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomeAbout;\r\n","import React, { useEffect } from \"react\";\r\nimport Slider from \"./Slider\";\r\nimport InfinitePosts from \"./Post/InfinitePosts\";\r\nimport HomeAbout from \"./HomeAbout\";\r\n\r\nconst Home = () => {\r\n\r\n  useEffect(() => {\r\n    document.title = `Kuchnia na obcasach`;\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      <header className=\"home__header\">\r\n        <Slider />\r\n      </header>\r\n      <section className=\"home__about\">\r\n        <HomeAbout />\r\n      </section>\r\n      <section className=\"home__posts\">\r\n        <div className=\"home__posts__title\">\r\n          <h2>Najnowsze posty</h2>\r\n        </div>\r\n        <InfinitePosts className={\"home__posts__container\"} />\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","const prettierTitle = (title) => {\r\n    title = title.toLowerCase();\r\n\r\n    if (title.indexOf(\"&#8220;\") !== -1) title = title.replace(/&#8220;/g, `\"`);\r\n    if (title.indexOf(\"&#8221;\") !== -1) title = title.replace(/&#8221;/g, `\"`);\r\n    if (title.indexOf(\"&#8211;\") !== -1) title = title.replace(/&#8211;/g, `-`);\r\n    \r\n    return `${title[0].toUpperCase()}${title.slice(1)}`; \r\n}\r\n \r\nexport default prettierTitle;","const changeDateType = (date) => {\r\n    const dateArr = date.split(\"T\");\r\n    return `${dateArr[0].split(\"-\")[2]}-${dateArr[0].split(\"-\")[1]}-${dateArr[0].split(\"-\")[0]}`\r\n}\r\n\r\nexport default changeDateType;","import React, { useState, useEffect } from \"react\";\r\nimport prettierTitle from \"../../functions/prettierTitle\";\r\nimport changeDateType from \"../../functions/changeDateType\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { API } from \"../../data\";\r\nimport Preloader from \"../Preloader\";\r\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\r\nimport \"react-lazy-load-image-component/src/effects/blur.css\";\r\n\r\nconst PostPrev = ({ post, handleCache }) => {\r\n  const [image, setImage] = useState({ images: [], isLoading: true });\r\n\r\n  useEffect(() => {\r\n    if (sessionStorage.getItem(`image-${post.id}`)) {\r\n      setImage({ images: JSON.parse(sessionStorage.getItem(`image-${post.id}`)), isLoading: false });\r\n      return;\r\n    }\r\n\r\n    const loadImage = async () => {\r\n      try {\r\n        const response = await fetch(`${API}media?parent=${post.id}`);\r\n        if (!response.ok) return;\r\n\r\n        const data = await response.json();\r\n\r\n\r\n        sessionStorage.setItem(`image-${post.id}`, JSON.stringify(data));\r\n        setImage({ images: data, isLoading: false });\r\n      } catch {\r\n        return;\r\n      }\r\n    };\r\n\r\n    loadImage();\r\n  }, [post]);\r\n\r\n  return (\r\n    <Link to={`/wpisy/${post.slug}`} className=\"postPrev\" onClick={handleCache}>\r\n      <div className=\"postPrev__content\">\r\n        {image.isLoading ? (\r\n          <Preloader />\r\n        ) : image.images[0] !== undefined &&\r\n          image.images[0].media_details.sizes.large === undefined ? (\r\n          <LazyLoadImage\r\n            alt={image.images[0].slug}\r\n            height={image.images[0].media_details.sizes.full.height}\r\n            src={image.images[0].media_details.sizes.full.source_url}\r\n            width={image.images[0].media_details.sizes.full.width}\r\n            effect=\"blur\"\r\n          />\r\n        ) : (\r\n          image.images[0] !== undefined && (\r\n            <LazyLoadImage\r\n              alt={image.images[0].slug}\r\n              height={image.images[0].media_details.sizes.large.height}\r\n              src={image.images[0].media_details.sizes.large.source_url}\r\n              width={image.images[0].media_details.sizes.large.width}\r\n              effect=\"blur\"\r\n            />\r\n          )\r\n        )}\r\n      </div>\r\n      <h3 className=\"postPrev__title\">{prettierTitle(post.title.rendered)}</h3>\r\n      <p className=\"postPrev__date\">\r\n        {changeDateType(post.date)}&nbsp;<i className=\"icon-calendar\"></i>\r\n      </p>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default PostPrev;\r\n"],"sourceRoot":""}