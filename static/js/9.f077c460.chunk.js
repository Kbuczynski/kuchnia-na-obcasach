(this["webpackJsonpkuchnia-na-obcasach"]=this["webpackJsonpkuchnia-na-obcasach"]||[]).push([[9],{123:function(t,e,a){"use strict";a.r(e);var n=a(9),s=a.n(n),r=a(176),c=a(12),o=a(7),i=a(0),u=a.n(i),l=a(11),p=a(18),f=a(77),m=a(78);e.default=function(t){var e=t.className,a=t.type,n=void 0===a?"home":a,b=t.categoryId,g=void 0===b?0:b,d=Object(i.useRef)(),h=Object(i.useState)({posts:[],isLoading:!0,countPosts:0}),v=Object(o.a)(h,2),O=v[0],j=v[1],y=Object(i.useState)(0),S=Object(o.a)(y,2),w=S[0],k=S[1],E=Object(i.useState)(g),P=Object(o.a)(E,2),I=P[0],L=P[1],x=Object(i.useState)(!0),_=Object(o.a)(x,2),N=_[0],C=_[1],T=Object(i.useState)(0),z=Object(o.a)(T,2),J=z[0],A=z[1],R=Object(i.useState)(!1),B=Object(o.a)(R,2),U=B[0],W=B[1];Object(i.useEffect)((function(){var t=new AbortController,e=t.signal;sessionStorage.getItem("countPosts")||0===O.countPosts||sessionStorage.setItem("countPosts",JSON.stringify(O.countPosts));var a=function(){var t=Object(c.a)(s.a.mark((function t(){var a,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(l.a,"posts?per_page=").concat(l.b,"&offset=").concat(w),"category"===n?a+="&categories=".concat(I):"tag"===n&&(a+="&tags=".concat(I)),t.prev=2,t.next=5,fetch(a,{signal:e});case 5:if((c=t.sent).ok){t.next=8;break}return t.abrupt("return");case 8:return U&&W(!1),t.t0=j,t.t1=[],t.t2=Object(r.a)(O.posts),t.t3=r.a,t.next=15,c.json();case 15:t.t4=t.sent,t.t5=(0,t.t3)(t.t4),t.t6=t.t1.concat.call(t.t1,t.t2,t.t5),t.t7=parseInt(c.headers.get("X-WP-Total"),10),t.t8={posts:t.t6,isLoading:!1,countPosts:t.t7},(0,t.t0)(t.t8),t.next=26;break;case 23:t.prev=23,t.t9=t.catch(2),W(!0);case 26:case"end":return t.stop()}}),t,null,[[2,23]])})));return function(){return t.apply(this,arguments)}}(),o=function(){return k(w+l.b)},i=new IntersectionObserver((function(t){if(t[0].intersectionRatio>0){var e=setTimeout(o,1e3);A(e)}}));if(sessionStorage.getItem("".concat(n))&&N){var u=JSON.parse(sessionStorage.getItem("".concat(n)));j({posts:Object(r.a)(u.posts),isLoading:!1,countPosts:parseInt(u.countPosts,10)}),k(u.posts.length)}if(!U){if(!O.isLoading&&O.countPosts===O.posts.length&&g===I)return;(O.posts.length<=O.countPosts||g!==I)&&(g!==I&&(window.location.reload(),L(g)),i.observe(d.current),sessionStorage.getItem("".concat(n))&&N||a()),sessionStorage.getItem("".concat(n))&&N&&C(!1)}return function(){t.abort(),i.disconnect(),clearTimeout(J)}}),[w,g,n]);var X=function(){"home"===n&&sessionStorage.setItem("".concat(n),JSON.stringify(O)),clearTimeout(J)};return u.a.createElement("div",{className:e,ref:d},O.isLoading?u.a.createElement(p.a,null):0===O.posts.length?u.a.createElement("p",null,"Brak post\xf3w"):O.posts.map((function(t,e){return u.a.createElement(m.LazyLoadComponent,{key:e},u.a.createElement(f.a,{post:t,handleCache:X}))})))}},176:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a(14);var s=a(20);function r(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(s.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},64:function(t,e,a){"use strict";e.a=function(t){return-1!==(t=t.toLowerCase()).indexOf("&#8220;")&&(t=t.replace("&#8220;",'"')),-1!==t.indexOf("&#8221;")&&(t=t.replace("&#8221;",'"')),"".concat(t[0].toUpperCase()).concat(t.slice(1))}},70:function(t,e,a){"use strict";e.a=function(t){var e=t.split("T");return"".concat(e[0].split("-")[2],"-").concat(e[0].split("-")[1],"-").concat(e[0].split("-")[0])}},77:function(t,e,a){"use strict";var n=a(9),s=a.n(n),r=a(12),c=a(7),o=a(0),i=a.n(o),u=a(64),l=a(70),p=a(6),f=a(11),m=a(18),b=a(78);a(124);e.a=function(t){var e=t.post,a=t.handleCache,n=Object(o.useState)({images:[],isLoading:!0}),g=Object(c.a)(n,2),d=g[0],h=g[1];return Object(o.useEffect)((function(){(function(){var t=Object(r.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(f.a,"media?parent=").concat(e.id));case 3:if((a=t.sent).ok){t.next=6;break}return t.abrupt("return");case 6:return t.t0=h,t.next=9,a.json();case 9:t.t1=t.sent,t.t2={images:t.t1,isLoading:!1},(0,t.t0)(t.t2),t.next=17;break;case 14:return t.prev=14,t.t3=t.catch(0),t.abrupt("return");case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}})()()}),[e]),i.a.createElement(p.b,{to:"/wpisy/".concat(e.slug),className:"postPrev",onClick:a},i.a.createElement("div",{className:"postPrev__content"},d.isLoading?i.a.createElement(m.a,null):void 0!==d.images[0]&&i.a.createElement(b.LazyLoadImage,{alt:d.images[0].slug,height:d.images[0].media_details.sizes.large.height,src:d.images[0].media_details.sizes.large.source_url,width:d.images[0].media_details.sizes.large.width,effect:"blur"})),i.a.createElement("h3",{className:"postPrev__title"},Object(u.a)(e.title.rendered)),i.a.createElement("p",{className:"postPrev__date"},Object(l.a)(e.date),"\xa0",i.a.createElement("i",{className:"icon-calendar"})))}}}]);
//# sourceMappingURL=9.f077c460.chunk.js.map