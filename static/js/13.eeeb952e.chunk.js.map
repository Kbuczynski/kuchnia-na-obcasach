{"version":3,"sources":["components/Post/Post.js","functions/prettierTitle.js"],"names":["PostContent","lazy","Post","slug","match","params","useState","post","isLoading","data","setData","useEffect","document","title","prettierTitle","replace","a","fetch","API","response","ok","json","loadPosts","length","fallback","to","pathname","indexOf"],"mappings":"2NAKMA,EAAcC,gBAAK,kBAAM,8DAoDhBC,UAlDF,SAAC,GAIP,IAFOC,EAER,EAHJC,MACEC,OAAUF,KAER,EACoBG,mBAAS,CAC/BC,KAAM,GACNC,WAAW,IAHT,mBACGC,EADH,KACSC,EADT,KA8BJ,OAxBAC,qBAAU,WACRC,SAASC,MAAT,UAAoBC,YAAcX,GAAMY,QACtC,KACA,KAFF,4BAIC,CAACZ,IAEJQ,qBAAU,YACO,uCAAG,4BAAAK,EAAA,+EAESC,MAAM,GAAD,OAAIC,IAAJ,sBAAqBf,IAFnC,WAERgB,EAFQ,QAGAC,GAHA,gCAGUV,EAAQ,CAAEH,KAAM,GAAIC,WAAW,IAHzC,mBAIdE,EAJc,UAKAS,EAASE,OALT,0BAKZd,KALY,KAMZC,WAAW,IANC,iFASRE,EAAQ,CAAEH,KAAM,GAAIC,WAAW,IATvB,0DAAH,qDAafc,KACC,CAACnB,IAECM,EAAKD,WAAkC,IAArBC,EAAKF,KAAKgB,OAI/B,oCACGd,EAAKD,UACJ,kBAAC,IAAD,MAEA,kBAAC,WAAD,CAAUgB,SAAU,kBAAC,IAAD,OAClB,kBAACxB,EAAD,CAAaO,KAAME,EAAKF,KAAK,OAR5B,kBAAC,IAAD,CAAUkB,GAAI,CAAEC,SAAU,Y,gCClCtBZ,IARO,SAACD,GAKnB,OAJkC,IAA9BA,EAAMc,QAAQ,aAAmBd,EAAQA,EAAME,QAAQ,WAAd,OACX,IAA9BF,EAAMc,QAAQ,aAAmBd,EAAQA,EAAME,QAAQ,WAAd,OACX,IAA9BF,EAAMc,QAAQ,aAAmBd,EAAQA,EAAME,QAAQ,WAAd,MAEtCF","file":"static/js/13.eeeb952e.chunk.js","sourcesContent":["import React, { useState, useEffect, Suspense, lazy } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { API } from \"../../data\";\r\nimport Preloader from \"../Preloader\";\r\nimport prettierTitle from \"../../functions/prettierTitle\";\r\nconst PostContent = lazy(() => import(\"./PostContent\"));\r\n\r\nconst Post = ({\r\n  match: {\r\n    params: { slug },\r\n  },\r\n}) => {\r\n  const [data, setData] = useState({\r\n    post: [],\r\n    isLoading: true,\r\n  });\r\n\r\n  useEffect(() => {\r\n    document.title = `${prettierTitle(slug).replace(\r\n      /-/g,\r\n      \" \"\r\n    )} - Kuchnia na obcasach`;\r\n  }, [slug]);\r\n\r\n  useEffect(() => {\r\n    const loadPosts = async () => {\r\n      try {\r\n        const response = await fetch(`${API}posts?slug=${slug}`);\r\n        if (!response.ok) await setData({ post: [], isLoading: false });\r\n        setData({\r\n          post: await response.json(),\r\n          isLoading: false,\r\n        });\r\n      } catch {\r\n        await setData({ post: [], isLoading: false });\r\n      }\r\n    };\r\n\r\n    loadPosts();\r\n  }, [slug]);\r\n\r\n  if (!data.isLoading && data.post.length === 0)\r\n    return <Redirect to={{ pathname: \"/404\" }} />;\r\n\r\n  return (\r\n    <>\r\n      {data.isLoading ? (\r\n        <Preloader />\r\n      ) : (\r\n        <Suspense fallback={<Preloader />}>\r\n          <PostContent post={data.post[0]} />\r\n        </Suspense>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n","const prettierTitle = (title) => {\r\n    if (title.indexOf(\"&#8220;\") !== -1) title = title.replace(/&#8220;/g, `\"`);\r\n    if (title.indexOf(\"&#8221;\") !== -1) title = title.replace(/&#8221;/g, `\"`);\r\n    if (title.indexOf(\"&#8211;\") !== -1) title = title.replace(/&#8211;/g, `-`);\r\n    \r\n    return title;\r\n}\r\n \r\nexport default prettierTitle;"],"sourceRoot":""}