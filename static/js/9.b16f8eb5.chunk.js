(this["webpackJsonpkuchnia-na-obcasach"]=this["webpackJsonpkuchnia-na-obcasach"]||[]).push([[9],{123:function(e,t,a){"use strict";a.r(t);var n=a(8),s=a.n(n),c=a(11),r=a(176),o=a(7),i=a(0),u=a.n(i),l=a(10),m=a(18),g=a(77),f=a(78);t.default=function(e){var t=e.className,a=e.type,n=void 0===a?"home":a,d=e.categoryId,p=void 0===d?0:d,b=Object(i.useRef)(),h=Object(i.useState)({posts:[],isLoading:!0,countPosts:0}),O=Object(o.a)(h,2),v=O[0],j=O[1],S=Object(i.useState)(0),y=Object(o.a)(S,2),w=y[0],E=y[1],L=Object(i.useState)(!0),I=Object(o.a)(L,2),_=I[0],k=I[1],x=Object(i.useState)(0),N=Object(o.a)(x,2),P=N[0],z=N[1],C=Object(i.useState)(!1),J=Object(o.a)(C,2),T=J[0],A=J[1],R=Object(i.useState)(p),B=Object(o.a)(R,2),U=B[0],W=B[1],X=function(){return E(w+l.b)},q=new IntersectionObserver((function(e){if(e[0].intersectionRatio>0){var t=setTimeout(X,3e3);z(t)}}));Object(i.useEffect)((function(){"home"!==n&&(j({posts:[],isLoading:!0,countPosts:0}),E(0))}),[p,n]),Object(i.useEffect)((function(){if("home"===n&&sessionStorage.getItem("".concat(n))&&_){var e=JSON.parse(sessionStorage.getItem("".concat(n)));j({posts:Object(r.a)(e.posts),isLoading:!1,countPosts:JSON.parse(sessionStorage.getItem("countPosts"))}),E(e.posts.length)}}),[_,n]),Object(i.useEffect)((function(){var e=new AbortController,t=e.signal,a=function(){var e=Object(c.a)(s.a.mark((function e(){var a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(l.a,"posts?per_page=").concat(l.b,"&offset=").concat(w),"category"===n?a+="&categories=".concat(p):"tag"===n&&(a+="&tags=".concat(p)),e.prev=2,e.next=5,fetch(a,{signal:t});case 5:if((c=e.sent).ok){e.next=8;break}return e.abrupt("return");case 8:return T&&A(!1),e.t0=j,e.t1=[],e.t2=Object(r.a)(v.posts),e.t3=r.a,e.next=15,c.json();case 15:e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.t6=e.t1.concat.call(e.t1,e.t2,e.t5),e.t7=parseInt(c.headers.get("X-WP-Total"),10),e.t8={posts:e.t6,isLoading:!1,countPosts:e.t7},(0,e.t0)(e.t8),e.next=26;break;case 23:e.prev=23,e.t9=e.catch(2),A(!0);case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(){return e.apply(this,arguments)}}();if(!T){if(!v.isLoading&&v.countPosts===v.posts.length)return;v.posts.length<=v.countPosts&&(p!==U&&(W(p),window.location.reload()),q.observe(b.current),"home"===n?sessionStorage.getItem("".concat(n))&&_||a():(a(),k(!1))),sessionStorage.getItem("".concat(n))&&_&&k(!1)}return function(){e.abort(),q.disconnect(),clearTimeout(P)}}),[w]);var D=function(){"home"===n&&sessionStorage.setItem("".concat(n),JSON.stringify(v)),clearTimeout(P)};return u.a.createElement("div",{className:t,ref:b},v.isLoading?u.a.createElement(m.a,null):0===v.posts.length?u.a.createElement("p",null,"Brak post\xf3w"):v.posts.map((function(e,t){return u.a.createElement(f.LazyLoadComponent,{key:t},u.a.createElement(g.a,{post:e,handleCache:D}))})))}},176:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(14);var s=a(20);function c(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(s.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},64:function(e,t,a){"use strict";t.a=function(e){return-1!==(e=e.toLowerCase()).indexOf("&#8220;")&&(e=e.replace(/&#8220;/g,'"')),-1!==e.indexOf("&#8221;")&&(e=e.replace(/&#8221;/g,'"')),-1!==e.indexOf("&#8211;")&&(e=e.replace(/&#8211;/g,"-")),"".concat(e[0].toUpperCase()).concat(e.slice(1))}},70:function(e,t,a){"use strict";t.a=function(e){var t=e.split("T");return"".concat(t[0].split("-")[2],"-").concat(t[0].split("-")[1],"-").concat(t[0].split("-")[0])}},77:function(e,t,a){"use strict";var n=a(8),s=a.n(n),c=a(11),r=a(7),o=a(0),i=a.n(o),u=a(64),l=a(70),m=a(5),g=a(10),f=a(18),d=a(78);a(124);t.a=function(e){var t=e.post,a=e.handleCache,n=Object(o.useState)({images:[],isLoading:!0}),p=Object(r.a)(n,2),b=p[0],h=p[1];return Object(o.useEffect)((function(){sessionStorage.getItem("image-".concat(t.id))?h({images:JSON.parse(sessionStorage.getItem("image-".concat(t.id))),isLoading:!1}):function(){var e=Object(c.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(g.a,"media?parent=").concat(t.id));case 3:if((a=e.sent).ok){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,a.json();case 8:n=e.sent,sessionStorage.setItem("image-".concat(t.id),JSON.stringify(n)),h({images:n,isLoading:!1}),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()()}),[t]),i.a.createElement(m.b,{to:"/wpisy/".concat(t.slug),className:"postPrev",onClick:a},i.a.createElement("div",{className:"postPrev__content"},b.isLoading?i.a.createElement(f.a,null):void 0!==b.images[0]&&void 0===b.images[0].media_details.sizes.large?i.a.createElement(d.LazyLoadImage,{alt:b.images[0].slug,height:b.images[0].media_details.sizes.full.height,src:b.images[0].media_details.sizes.full.source_url,width:b.images[0].media_details.sizes.full.width,effect:"blur"}):void 0!==b.images[0]&&i.a.createElement(d.LazyLoadImage,{alt:b.images[0].slug,height:b.images[0].media_details.sizes.large.height,src:b.images[0].media_details.sizes.large.source_url,width:b.images[0].media_details.sizes.large.width,effect:"blur"})),i.a.createElement("h3",{className:"postPrev__title"},Object(u.a)(t.title.rendered)),i.a.createElement("p",{className:"postPrev__date"},Object(l.a)(t.date),"\xa0",i.a.createElement("i",{className:"icon-calendar"})))}}}]);
//# sourceMappingURL=9.b16f8eb5.chunk.js.map