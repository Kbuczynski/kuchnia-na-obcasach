{"version":3,"sources":["components/Post/CategoryPosts.js","functions/prettierTitle.js"],"names":["InfinitePosts","lazy","CategoryPosts","slug","match","params","type","useState","category","isLoading","data","setData","useEffect","document","title","prettierTitle","replace","ENDPOINT","API","a","fetch","response","ok","json","getCategory","length","className","name","fallback","categoryId","id","to","pathname","indexOf"],"mappings":"2NAMMA,EAAgBC,gBAAK,kBAAM,uDAiElBC,UA/DO,SAAC,GAKhB,IAHOC,EAGR,EAJJC,MACEC,OAAUF,KAGR,IADJG,YACI,MADG,MACH,IACoBC,mBAAS,CAAEC,SAAU,GAAIC,WAAW,IADxD,mBACGC,EADH,KACSC,EADT,KAgCJ,OA7BAC,qBAAU,WACRC,SAASC,MAAT,UAAoBC,YAAcZ,GAAMa,QAAQ,KAAM,KAAtD,4BACC,CAACb,IAEJS,qBAAU,WACR,IAAIK,EAAQ,UAAMC,KAEOD,GAAZ,aAATX,EAAiC,aACpB,OAEjBW,GAAQ,gBAAad,GAEJ,uCAAG,4BAAAgB,EAAA,6DAClBR,EAAQ,CAAEH,SAAU,GAAIC,WAAW,IADjB,kBAIOW,MAAMH,GAJb,WAIVI,EAJU,QAMFC,GANE,6DAQhBX,EARgB,UAQUU,EAASE,OARnB,0BAQNf,SARM,KAQ2BC,WAAW,IARtC,oJAAH,oDAcjBe,KACC,CAACrB,EAAMG,IAELI,EAAKD,WAAsC,IAAzBC,EAAKF,SAASiB,OAInC,yBAAKC,UAAU,iBACb,yBAAKA,UAAU,wBACb,4DAC+B,aAATpB,EAAsB,YAAc,SAAU,IAClE,+BAAQI,EAAKD,WAAaC,EAAKF,SAAS,GAAGmB,QAG9CjB,EAAKD,UACJ,kBAAC,IAAD,MAEA,kBAAC,WAAD,CAAUmB,SAAU,kBAAC,IAAD,OAClB,kBAAC5B,EAAD,CACE0B,UAAW,2BACXpB,KAAMA,EACNuB,WAAYnB,EAAKF,SAAS,GAAGsB,OAjB9B,kBAAC,IAAD,CAAUC,GAAI,CAAEC,SAAU,Y,gCCtCtBjB,IARO,SAACD,GAKnB,OAJkC,IAA9BA,EAAMmB,QAAQ,aAAmBnB,EAAQA,EAAME,QAAQ,WAAd,OACX,IAA9BF,EAAMmB,QAAQ,aAAmBnB,EAAQA,EAAME,QAAQ,WAAd,OACX,IAA9BF,EAAMmB,QAAQ,aAAmBnB,EAAQA,EAAME,QAAQ,WAAd,MAEtCF","file":"static/js/12.d649b5cc.chunk.js","sourcesContent":["import React, { useEffect, useState, Suspense, lazy } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { API } from \"../../data\";\r\nimport Preloader from \"../Preloader\";\r\nimport prettierTitle from \"../../functions/prettierTitle\";\r\n\r\nconst InfinitePosts = lazy(() => import(\"./InfinitePosts\"));\r\n\r\nconst CategoryPosts = ({\r\n  match: {\r\n    params: { slug },\r\n  },\r\n  type = \"tag\",\r\n}) => {\r\n  const [data, setData] = useState({ category: [], isLoading: true });\r\n\r\n  useEffect(() => {\r\n    document.title = `${prettierTitle(slug).replace(/-/g, \" \")} - Kuchnia na obcasach`;\r\n  }, [slug])\r\n\r\n  useEffect(() => {\r\n    let ENDPOINT = `${API}`;\r\n\r\n    if (type === \"category\") ENDPOINT += \"categories\";\r\n    else ENDPOINT += \"tags\";\r\n\r\n    ENDPOINT += `?slug=${slug}`;\r\n\r\n    const getCategory = async () => {\r\n      setData({ category: [], isLoading: true });\r\n      \r\n      try {\r\n        const response = await fetch(ENDPOINT);\r\n\r\n        if (!response.ok) return;\r\n\r\n        setData({ category: await response.json(), isLoading: false });\r\n      } catch {\r\n        return;\r\n      }\r\n    };\r\n\r\n    getCategory();\r\n  }, [slug, type]);\r\n\r\n  if (!data.isLoading && data.category.length === 0)\r\n    return <Redirect to={{ pathname: \"/404\" }} />;\r\n\r\n  return (\r\n    <div className=\"categoryPosts\">\r\n      <div className=\"categoryPosts__title\">\r\n        <h3>\r\n          Wyszukałeś posty z {type === \"category\" ? \"kategorii\" : \"tagiem\"}{\" \"}\r\n          <span>{!data.isLoading && data.category[0].name}</span>\r\n        </h3>\r\n      </div>\r\n      {data.isLoading ? (\r\n        <Preloader />\r\n      ) : (\r\n        <Suspense fallback={<Preloader />}>\r\n          <InfinitePosts\r\n            className={\"categoryPosts__container\"}\r\n            type={type}\r\n            categoryId={data.category[0].id}\r\n          />\r\n        </Suspense>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CategoryPosts;\r\n","const prettierTitle = (title) => {\r\n    if (title.indexOf(\"&#8220;\") !== -1) title = title.replace(/&#8220;/g, `\"`);\r\n    if (title.indexOf(\"&#8221;\") !== -1) title = title.replace(/&#8221;/g, `\"`);\r\n    if (title.indexOf(\"&#8211;\") !== -1) title = title.replace(/&#8211;/g, `-`);\r\n    \r\n    return title;\r\n}\r\n \r\nexport default prettierTitle;"],"sourceRoot":""}