(this["webpackJsonpkuchnia-na-obcasach"]=this["webpackJsonpkuchnia-na-obcasach"]||[]).push([[7],{123:function(e,t,a){"use strict";a.r(t);var s=a(8),n=a.n(s),c=a(11),r=a(176),i=a(7),o=a(0),l=a.n(o),u=a(10),m=a(18),d=a(77),p=a(78);t.default=function(e){var t=e.className,a=e.type,s=void 0===a?"home":a,g=e.categoryId,f=void 0===g?0:g,h=Object(o.useRef)(),b=Object(o.useState)({posts:[],isLoading:!0,countPosts:0}),v=Object(i.a)(b,2),O=v[0],_=v[1],j=Object(o.useState)(0),E=Object(i.a)(j,2),S=E[0],N=E[1],w=Object(o.useState)(!0),z=Object(i.a)(w,2),k=z[0],L=z[1],x=Object(o.useState)(0),y=Object(i.a)(x,2),I=y[0],P=y[1],C=Object(o.useState)(!1),J=Object(i.a)(C,2),T=J[0],B=J[1],R=Object(o.useState)(f),A=Object(i.a)(R,2),M=A[0],U=A[1],W=function(){return N(S+u.b)},X=new IntersectionObserver((function(e){if(e[0].intersectionRatio>0){var t=setTimeout(W,3e3);P(t)}}));Object(o.useEffect)((function(){"home"!==s&&(_({posts:[],isLoading:!0,countPosts:0}),N(0))}),[f,s]),Object(o.useEffect)((function(){if("home"===s&&sessionStorage.getItem("".concat(s))&&k){var e=JSON.parse(sessionStorage.getItem("".concat(s)));_({posts:Object(r.a)(e.posts),isLoading:!1,countPosts:JSON.parse(sessionStorage.getItem("countPosts"))}),N(e.posts.length)}}),[k,s]),Object(o.useEffect)((function(){var e=new AbortController,t=e.signal,a=function(){var e=Object(c.a)(n.a.mark((function e(){var a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(u.a,"posts?per_page=").concat(u.b,"&offset=").concat(S),"category"===s?a+="&categories=".concat(f):"tag"===s&&(a+="&tags=".concat(f)),e.prev=2,e.next=5,fetch(a,{signal:t});case 5:if((c=e.sent).ok){e.next=8;break}return e.abrupt("return");case 8:return T&&B(!1),e.t0=_,e.t1=[],e.t2=Object(r.a)(O.posts),e.t3=r.a,e.next=15,c.json();case 15:e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.t6=e.t1.concat.call(e.t1,e.t2,e.t5),e.t7=parseInt(c.headers.get("X-WP-Total"),10),e.t8={posts:e.t6,isLoading:!1,countPosts:e.t7},(0,e.t0)(e.t8),e.next=26;break;case 23:e.prev=23,e.t9=e.catch(2),B(!0);case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(){return e.apply(this,arguments)}}();if(!T){if(!O.isLoading&&O.countPosts===O.posts.length)return;O.posts.length<=O.countPosts&&(f!==M&&(U(f),window.location.reload()),X.observe(h.current),"home"===s?sessionStorage.getItem("".concat(s))&&k||a():(a(),L(!1))),sessionStorage.getItem("".concat(s))&&k&&L(!1)}return function(){e.abort(),X.disconnect(),clearTimeout(I)}}),[S]);var Z=function(){"home"===s&&sessionStorage.setItem("".concat(s),JSON.stringify(O)),clearTimeout(I)};return l.a.createElement("div",{className:t,ref:h},O.isLoading?l.a.createElement(m.a,null):0===O.posts.length?l.a.createElement("p",null,"Brak post\xf3w"):O.posts.map((function(e,t){return l.a.createElement(p.LazyLoadComponent,{key:t},l.a.createElement(d.a,{post:e,handleCache:Z}))})))}},274:function(e,t,a){e.exports=a.p+"static/media/slider-1.005deb6f.jpg"},275:function(e,t,a){e.exports=a.p+"static/media/slider-2.732cc673.jpg"},276:function(e,t,a){e.exports=a.p+"static/media/slider-3.f59a09a8.jpg"},597:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(270),r=a.n(c),i=a(271),o=a.n(i),l=a(272),u=a(274),m=a.n(u),d=a(275),p=a.n(d),g=a(276),f=a.n(g),h=o()(r.a),b=function(){return n.a.createElement(h,{play:!0,cancelOnInteraction:!1,interval:5e3,cssModule:l.a,className:"slider"},n.a.createElement("div",{"data-src":m.a,className:"slider__item",alt:"Ciasto z porzeczkami"},"Smacznie"),n.a.createElement("div",{"data-src":f.a,className:"slider__item",alt:"deser malinowy"},"Zdrowo"),n.a.createElement("div",{"data-src":p.a,className:"slider__item",alt:"Babka z porzeczkami"},"Sezonowo"))},v=a(123);t.default=function(){return n.a.createElement("div",{className:"home"},n.a.createElement("header",{className:"home__header"},n.a.createElement(b,null)),n.a.createElement("main",{className:"home__posts"},n.a.createElement("div",{className:"home__posts__title"},n.a.createElement("h2",null,"Najnowsze posty")),n.a.createElement(v.default,{className:"home__posts__container"})))}},64:function(e,t,a){"use strict";t.a=function(e){return-1!==(e=e.toLowerCase()).indexOf("&#8220;")&&(e=e.replace(/&#8220;/g,'"')),-1!==e.indexOf("&#8221;")&&(e=e.replace(/&#8221;/g,'"')),-1!==e.indexOf("&#8211;")&&(e=e.replace(/&#8211;/g,"-")),"".concat(e[0].toUpperCase()).concat(e.slice(1))}},70:function(e,t,a){"use strict";t.a=function(e){var t=e.split("T");return"".concat(t[0].split("-")[2],"-").concat(t[0].split("-")[1],"-").concat(t[0].split("-")[0])}},77:function(e,t,a){"use strict";var s=a(8),n=a.n(s),c=a(11),r=a(7),i=a(0),o=a.n(i),l=a(64),u=a(70),m=a(5),d=a(10),p=a(18),g=a(78);a(124);t.a=function(e){var t=e.post,a=e.handleCache,s=Object(i.useState)({images:[],isLoading:!0}),f=Object(r.a)(s,2),h=f[0],b=f[1];return Object(i.useEffect)((function(){sessionStorage.getItem("image-".concat(t.id))?b({images:JSON.parse(sessionStorage.getItem("image-".concat(t.id))),isLoading:!1}):function(){var e=Object(c.a)(n.a.mark((function e(){var a,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d.a,"media?parent=").concat(t.id));case 3:if((a=e.sent).ok){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,a.json();case 8:s=e.sent,sessionStorage.setItem("image-".concat(t.id),JSON.stringify(s)),b({images:s,isLoading:!1}),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()()}),[t]),o.a.createElement(m.b,{to:"/wpisy/".concat(t.slug),className:"postPrev",onClick:a},o.a.createElement("div",{className:"postPrev__content"},h.isLoading?o.a.createElement(p.a,null):void 0!==h.images[0]&&void 0===h.images[0].media_details.sizes.large?o.a.createElement(g.LazyLoadImage,{alt:h.images[0].slug,height:h.images[0].media_details.sizes.full.height,src:h.images[0].media_details.sizes.full.source_url,width:h.images[0].media_details.sizes.full.width,effect:"blur"}):void 0!==h.images[0]&&o.a.createElement(g.LazyLoadImage,{alt:h.images[0].slug,height:h.images[0].media_details.sizes.large.height,src:h.images[0].media_details.sizes.large.source_url,width:h.images[0].media_details.sizes.large.width,effect:"blur"})),o.a.createElement("h3",{className:"postPrev__title"},Object(l.a)(t.title.rendered)),o.a.createElement("p",{className:"postPrev__date"},Object(u.a)(t.date),"\xa0",o.a.createElement("i",{className:"icon-calendar"})))}}}]);
//# sourceMappingURL=7.cb1e294d.chunk.js.map