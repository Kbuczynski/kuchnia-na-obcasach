{"version":3,"sources":["components/Post/CategoryPosts.js","functions/prettierTitle.js"],"names":["InfinitePosts","lazy","CategoryPosts","slug","match","params","type","useState","category","isLoading","data","setData","useEffect","document","title","prettierTitle","replace","ENDPOINT","API","a","fetch","response","ok","json","getCategory","length","className","name","fallback","categoryId","id","to","pathname","indexOf"],"mappings":"2NAMMA,EAAgBC,gBAAK,kBAAM,uDAiElBC,UA/DO,SAAC,GAKhB,IAHOC,EAGR,EAJJC,MACEC,OAAUF,KAGR,IADJG,YACI,MADG,MACH,IACoBC,mBAAS,CAAEC,SAAU,GAAIC,WAAW,IADxD,mBACGC,EADH,KACSC,EADT,KAgCJ,OA7BAC,qBAAU,WACRC,SAASC,MAAT,UAAoBC,YAAcZ,GAAMa,QAAQ,KAAM,KAAtD,4BACC,CAACb,IAEJS,qBAAU,WACR,IAAIK,EAAQ,UAAMC,KAEOD,GAAZ,aAATX,EAAiC,aACpB,OAEjBW,GAAQ,gBAAad,GAEJ,uCAAG,4BAAAgB,EAAA,6DAClBR,EAAQ,CAAEH,SAAU,GAAIC,WAAW,IADjB,kBAIOW,MAAMH,GAJb,WAIVI,EAJU,QAMFC,GANE,6DAQhBX,EARgB,UAQUU,EAASE,OARnB,0BAQNf,SARM,KAQ2BC,WAAW,IARtC,oJAAH,oDAcjBe,KACC,CAACrB,EAAMG,IAELI,EAAKD,WAAsC,IAAzBC,EAAKF,SAASiB,OAInC,yBAAKC,UAAU,iBACb,yBAAKA,UAAU,wBACb,4DAC+B,aAATpB,EAAsB,YAAc,SAAU,IAClE,+BAAQI,EAAKD,WAAaC,EAAKF,SAAS,GAAGmB,QAG9CjB,EAAKD,UACJ,kBAAC,IAAD,MAEA,kBAAC,WAAD,CAAUmB,SAAU,kBAAC,IAAD,OAClB,kBAAC5B,EAAD,CACE0B,UAAW,2BACXpB,KAAMA,EACNuB,WAAYnB,EAAKF,SAAS,GAAGsB,OAjB9B,kBAAC,IAAD,CAAUC,GAAI,CAAEC,SAAU,Y,gCCtCtBjB,IARO,SAACD,GAKnB,OAJkC,IAA9BA,EAAMmB,QAAQ,aAAmBnB,EAAQA,EAAME,QAAQ,WAAd,OACX,IAA9BF,EAAMmB,QAAQ,aAAmBnB,EAAQA,EAAME,QAAQ,WAAd,OACX,IAA9BF,EAAMmB,QAAQ,aAAmBnB,EAAQA,EAAME,QAAQ,WAAd,MAEtCF","file":"static/js/12.8f22f932.chunk.js","sourcesContent":["import React, { useEffect, useState, Suspense, lazy } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { API } from \"../../data\";\nimport Preloader from \"../Preloader\";\nimport prettierTitle from \"../../functions/prettierTitle\";\n\nconst InfinitePosts = lazy(() => import(\"./InfinitePosts\"));\n\nconst CategoryPosts = ({\n  match: {\n    params: { slug },\n  },\n  type = \"tag\",\n}) => {\n  const [data, setData] = useState({ category: [], isLoading: true });\n\n  useEffect(() => {\n    document.title = `${prettierTitle(slug).replace(/-/g, \" \")} - Kuchnia na obcasach`;\n  }, [slug])\n\n  useEffect(() => {\n    let ENDPOINT = `${API}`;\n\n    if (type === \"category\") ENDPOINT += \"categories\";\n    else ENDPOINT += \"tags\";\n\n    ENDPOINT += `?slug=${slug}`;\n\n    const getCategory = async () => {\n      setData({ category: [], isLoading: true });\n      \n      try {\n        const response = await fetch(ENDPOINT);\n\n        if (!response.ok) return;\n\n        setData({ category: await response.json(), isLoading: false });\n      } catch {\n        return;\n      }\n    };\n\n    getCategory();\n  }, [slug, type]);\n\n  if (!data.isLoading && data.category.length === 0)\n    return <Redirect to={{ pathname: \"/404\" }} />;\n\n  return (\n    <div className=\"categoryPosts\">\n      <div className=\"categoryPosts__title\">\n        <h3>\n          Wyszukałeś posty z {type === \"category\" ? \"kategorii\" : \"tagiem\"}{\" \"}\n          <span>{!data.isLoading && data.category[0].name}</span>\n        </h3>\n      </div>\n      {data.isLoading ? (\n        <Preloader />\n      ) : (\n        <Suspense fallback={<Preloader />}>\n          <InfinitePosts\n            className={\"categoryPosts__container\"}\n            type={type}\n            categoryId={data.category[0].id}\n          />\n        </Suspense>\n      )}\n    </div>\n  );\n};\n\nexport default CategoryPosts;\n","const prettierTitle = (title) => {\n    if (title.indexOf(\"&#8220;\") !== -1) title = title.replace(/&#8220;/g, `\"`);\n    if (title.indexOf(\"&#8221;\") !== -1) title = title.replace(/&#8221;/g, `\"`);\n    if (title.indexOf(\"&#8211;\") !== -1) title = title.replace(/&#8211;/g, `-`);\n    \n    return title;\n}\n \nexport default prettierTitle;"],"sourceRoot":""}